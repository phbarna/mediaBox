#!/bin/bash

user=$(whoami)

resolvFile="/etc/resolv.conf"


function rootcheck() {
	if [ $user != "root" ]; then
		echoRed -n "Permission denied:"
		echo " Try using sudo for this operation"
		exit
	fi
}

function ipvanish() {

	echo $'# Using ipvanish dns\ndomain home\nnameserver 198.18.0.1\nnameserver 198.18.0.2\nnameserver 192.168.1.254' >$resolvFile
	echo "Set to ipvanish dns"
}

function normal() {
	echo $'# Generated by resolvconf\ndomain home\nnameserver 192.168.1.254' >$resolvFile
	echo "Set to normal dns"
}

function invalidMessage() {
	echoRed -n "Invalid usage:"
	echo $' Arguments must be:\ni (for ipvanish dns)\nn (for normal dns)\nv (to view resolv.conf)'
}

if [ $# -ne 1 ]; then
	invalidMessage
	exit
fi
if [ $1 = "v" ]; then
	cat $resolvFile
	exit
fi

if [ $1 = "i" ]; then
	rootcheck
	ipvanish
elif [ $1 = "n" ]; then
	rootcheck
	normal
else
	invalidMessage
	exit
fi
echo "Restarting dhcpcd service ..."
systemctl restart dhcpcd
